(function(t){function e(e){for(var n,r,a=e[0],c=e[1],l=e[2],u=0,f=[];u<a.length;u++)r=a[u],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&f.push(o[r][0]),o[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(f.length)f.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],n=!0,r=1;r<s.length;r++){var c=s[r];0!==o[c]&&(n=!1)}n&&(i.splice(e--,1),t=a(a.s=s[0]))}return t}var n={},o={index:0},i=[];function r(t){return a.p+"js/"+({about:"about"}[t]||t)+"."+{about:"967dcc40"}[t]+".js"}function a(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.e=function(t){var e=[],s=o[t];if(0!==s)if(s)e.push(s[2]);else{var n=new Promise((function(e,n){s=o[t]=[e,n]}));e.push(s[2]=n);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,a.nc&&c.setAttribute("nonce",a.nc),c.src=r(t);var l=new Error;i=function(e){c.onerror=c.onload=null,clearTimeout(u);var s=o[t];if(0!==s){if(s){var n=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",l.name="ChunkLoadError",l.type=n,l.request=i,s[1](l)}o[t]=void 0}};var u=setTimeout((function(){i({type:"timeout",target:c})}),12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(e)},a.m=t,a.c=n,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(s,n,function(e){return t[e]}.bind(null,n));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var d=l;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";s("85ec")},1:function(t,e){},10:function(t,e){},11:function(t,e){},12:function(t,e){},2:function(t,e){},3:function(t,e){},"3e3a":function(t,e,s){t.exports=s.p+"media/ding.f29999de.ogg"},4:function(t,e){},"432e":function(t,e,s){"use strict";s("a8bc")},5:function(t,e){},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-app",[s("v-app-bar",{staticClass:"white--text",attrs:{app:"",color:"#00000000"}},[s("h1",[t._v("Mosaic Garden")]),s("v-spacer"),s("v-menu",{attrs:{left:"",bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[s("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",o,!1),n),[s("v-icon",{attrs:{color:"#ffffff"}},[t._v("mdi-dots-vertical")])],1)]}}])},[s("v-list",[s("v-list-item",[s("v-list-item-content",[s("v-list-item-title",[s("router-link",{attrs:{to:"/"}},[t._v("Home")])],1),s("v-list-item-title",[s("router-link",{attrs:{to:"/CreateMeta"}},[t._v("CreateMeta")])],1)],1)],1)],1)],1)],1),s("v-main",[s("router-view")],1)],1)],1)},i=[],r={},a=r,c=(s("034f"),s("2877")),l=Object(c["a"])(a,o,i,!1,null,null,null),u=l.exports,d=s("ce5b"),f=s.n(d);s("bf40"),s("5363");n["default"].use(f.a);var p={},v=new f.a(p),m=(s("d3b7"),s("3ca3"),s("ddb0"),s("8c4f")),h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12",lg:"6",ms:"12"}},[s("v-card",{staticClass:"mb-3",attrs:{elevation:"2"}},[s("v-card-title",[t._v(" Garden Address ")]),s("v-card-text",[s("h3",[t._v(t._s(t.g_rawAddress.plain())),s("v-icon",{staticClass:"ml-3",on:{click:t.copy}},[t._v("mdi-content-copy")])],1)]),s("v-card-text",[t._v(" Please send your mosaic to the address above. (Except XYM)"),s("br"),t._v(" Money transfer from multisig addresses is not supported. Aggregate transactions are not supported. ")])],1)],1),s("v-col",{attrs:{cols:"12",lg:"6",ms:"12"}},[s("v-card",{staticClass:"mb-3",attrs:{elevation:"2"}},[s("v-card-title",[t._v(" User Address ")]),s("v-card-text",[s("v-row",[s("v-col",{attrs:{cols:"12",lg:"9",ms:"12"}},[s("v-text-field",{attrs:{disabled:"",label:"今後実装予定"},model:{value:t.rawAddress,callback:function(e){t.rawAddress=e},expression:"rawAddress"}})],1),s("v-col",[s("v-btn",{staticClass:"btn",attrs:{disabled:""}},[t._v("SSSへ署名を送る")])],1)],1)],1)],1)],1)],1),s("new-transaction",{ref:"tx",attrs:{histories:t.histories}}),s("list-view",{ref:"mosaic_list",attrs:{"p-items":t.mosaics}}),s("v-snackbar",{attrs:{absolute:"",bottom:"",color:t.color,outlined:""},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.snackbarMsg)+" ")])],1)],1)},g=[],b=s("1da1"),_=(s("96cf"),s("ac1f"),s("841c"),s("7db0"),s("5319"),s("159b"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-card",{staticClass:"mx-auto"},[s("v-list",{staticClass:"overflow-y-auto",attrs:{"max-height":"250",height:"250"}},[s("v-subheader",[t._v("Stock Mosaics("+t._s(t.items.length)+")")]),t._l(t.items,(function(e,n){return s("v-list-item",{key:n},[s("v-list-item-icon",[s("v-icon",[t._v("mdi-gift")])],1),s("v-list-item-content",[s("v-list-item-title",[t._v("Mosaic:"),s("span",{staticClass:"mosaic"},[t._v(t._s(e.mosaicInfo.id.toHex()))])]),s("v-list-item-subtitle",[t._v("amount:"+t._s(e.mosaic.amount.compact()))])],1)],1)}))],2)],1)],1)}),y=[],w={props:{pItems:{type:Array,defualt:function(){return[]}}},data:function(){return{items:this.pItems}},methods:{update:function(){this.items=this.pItems}}},x=w,k=(s("8ef5"),Object(c["a"])(x,_,y,!1,null,"25edcf24",null)),A=k.exports,M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-card",{staticClass:"mx-auto",attrs:{color:"#FFFFFF90"}},[t.show?[s("v-progress-linear",{staticClass:"font-italic text--disabled",attrs:{color:"blue",height:"20","buffer-value":"0",stream:""}},[t._v(" Receiving ")])]:[s("v-progress-linear",{staticClass:"font-italic text--disabled",attrs:{color:"red",height:"20","buffer-value":"0",stream:""}},[t._v(" Not Receiving(please reload) ")])],s("v-row",{staticClass:"mb-2 pa-2"},[s("v-col",{attrs:{cols:"12",lg:"6"}},[s("v-card",[s("v-list",{staticClass:"overflow-y-auto",attrs:{"max-height":"250",height:"250"}},[s("v-subheader",[t._v("History of mosaic reception")]),t._l(t.recipt_items,(function(e,n){return s("v-list-item",{key:n},[s("v-list-item-icon",[e.newB&&0==n?[s("div",{staticClass:"box"},[s("v-icon",{attrs:{color:"orange darken-2"}},[t._v("mdi-new-box")])],1)]:[s("v-icon",[t._v("mdi-handshake-outline")])]],2),s("v-list-item",{attrs:{"two-line":""}},t._l(t.display(e),(function(e,n){return s("v-list-item-content",{key:n},[s("v-list-item-title",[t._v(" Mosaic:"+t._s(e.name)+" "),e.message.length>0?s("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[s("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",o,!1),n),[s("v-icon",{attrs:{color:"grey lighten-1"}},[t._v(" mdi-email-alert ")])],1)]}}],null,!0),model:{value:e.show,callback:function(s){t.$set(e,"show",s)},expression:"list.show"}},[s("span",[t._v(t._s(e.message))])]):t._e()],1),s("v-list-item-subtitle",[t._v("Address:"+t._s(e.signerAddress))])],1)})),1)],1)}))],2)],1)],1),s("v-col",{attrs:{cols:"12",lg:"6"}},[s("v-card",{attrs:{tile:""}},[s("v-list",{staticClass:"overflow-y-auto",attrs:{"max-height":"250",height:"250"}},[s("v-subheader",[t._v("History of mosaic sending")]),t._l(t.send_items,(function(e,n){return s("v-list-item",{key:n},[s("v-list-item-icon",[e.newB&&0==n?[s("div",{staticClass:"box"},[s("v-icon",{attrs:{color:"orange darken-2"}},[t._v("mdi-new-box")])],1)]:[s("v-icon",[t._v("mdi-hand-coin")])]],2),t._l(t.display(e),(function(e,n){return s("v-list-item-content",{key:n},[s("v-list-item-title",[t._v(" Mosaic:"+t._s(e.name)+" "),e.message.length>0?s("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[s("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",o,!1),n),[s("v-icon",{attrs:{color:"grey lighten-1"}},[t._v(" mdi-email-alert ")])],1)]}}],null,!0),model:{value:e.show,callback:function(s){t.$set(e,"show",s)},expression:"list.show"}},[s("span",[t._v(t._s(e.message))])]):t._e()],1),s("v-list-item-subtitle",[t._v("Address:"+t._s(e.recipientAddress))])],1)}))],2)}))],2)],1)],1)],1)],2)],1)},R=[],C=s("83ff"),T={props:{histories:{type:Object,defualt:function(){}}},data:function(){return{recipt_items:this.histories.receive_mosaics,send_items:this.histories.send_mosaics,show:!1}},methods:{display:function(t){var e=this,s=[],n=t.signer.address.plain(),o=t.recipientAddress.plain();return t.mosaics.forEach((function(i){s.push({signerAddress:n,recipientAddress:o,name:i.id.toHex(),amount:i.amount.compact(),message:e.getMessage(t),show:!1})})),s},getMessage:function(t){var e="";return t.message&&(t.message.type===C["MessageType"].EncryptedMessage?e="[EncryptedMessage]":t.message.type===C["MessageType"].PersistentHarvestingDelegationMessage?e="[PersistentHarvestingDelegationMessage]":(t.message.type===C["MessageType"].PlainMessage||t.message.type===C["MessageType"].RawMessage)&&(e=t.message.payload)),this.escape_html(e)},escape_html:function(t){return"string"!==typeof t?t:t.replace(/[&'`"<>]/g,(function(t){return{"&":"&amp;","'":"&#x27;","`":"&#x60;",'"':"&quot;","<":"&lt;",">":"&gt;"}[t]}))}}},O=T,j=(s("432e"),Object(c["a"])(O,M,R,!1,null,"37e7669e",null)),P=j.exports,S=s("f32c"),E=s("883e"),$=s("9d9c"),F="https://dual-1.nodes-xym.work:3001",H="NB3YJ6FZ7CRZLMILAW4S6Y3ONUP5TG5GZXGFWNA",B={components:{ListView:A,NewTransaction:P},data:function(){return{mosaics:[],g_rawAddress:C["Address"].createFromRawAddress(H),rawAddress:"",nglist:$["ng_mosaic_lists"],accountRepository:null,namespaceRepository:null,mosaicRepository:null,transactionRepository:null,snackbar:!1,multiLine:!0,listener:null,init:!0,histories:{receive_mosaics:[],send_mosaics:[]},color:"",snackbarMsg:"",recipientAudio:new Audio(s("3e3a"))}},created:function(){var t=this;this.$nextTick((function(){var e=new C["RepositoryFactoryHttp"](F);t.accountRepository=e.createAccountRepository(),t.transactionRepository=e.createTransactionRepository(),t.mosaicRepository=e.createMosaicRepository(),t.namespaceRepository=e.createNamespaceRepository(),t.getAccountInfo(),t.getTransfers(),t.openListener()}))},destroyed:function(){this.closeListenr()},methods:{getTransfers:function(){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.transactionRepository.search({address:t.g_rawAddress,group:C["TransactionGroup"].Confirmed,pageSize:10,order:"desc"}).toPromise();case 2:s=e.sent,t.parseTx(s.data),t.init=!1;case 5:case"end":return e.stop()}}),e)})))()},getAccountInfo:function(){var t=this;this.accountRepository.getAccountInfo(this.g_rawAddress).pipe(S["a"]((function(t){return t.mosaics})),E["a"]((function(e){return!t.nglist.find((function(t){return t===e.id.toHex()}))}))).subscribe((function(e){if(0!==e.amount.compact()){var s=new C["MosaicId"](e.id.toHex());t.mosaicRepository.getMosaic(s).subscribe((function(s){return t.mosaics.unshift({mosaicInfo:s,mosaic:e})})),t.$refs.mosaic_list.update()}}))},openListener:function(){var t=this,e=F.replace("http","ws")+"/ws";this.listener=new C["Listener"](e,this.namespaceRepository,WebSocket),this.listener.open().then((function(){t.$refs.tx.show=!0,console.log("listener open"),t.listener.newBlock().subscribe((function(e){t.$refs.tx.show=!0,t.newBlock(e)}),(function(e){try{t.$refs.tx.show=!1}catch(s){console.log("listener error"),console.log(s)}}))})),this.listener.webSocket.onclose=Object(b["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{console.log("listener onclose"),this.$refs.tx.show=!1}catch(e){}case 1:case"end":return t.stop()}}),t,this)})))},closeListenr:function(){this.listener.close(),this.listener=null;try{this.$refs.tx.show=!1}catch(t){}console.log("listener onclose")},copy:function(){var t=this;console.log("address copy"),navigator.clipboard.writeText(this.g_rawAddress.plain()).then((function(){console.log("copied!"),t.snackbarMsg="address copy",t.color="success",t.snackbar=!0})).catch((function(t){console.error(t)}))},newBlock:function(t){var e=this;this.transactionRepository.search({address:this.g_rawAddress,height:t.height,group:C["TransactionGroup"].Confirmed}).subscribe((function(t){t.data.length>0&&(e.parseTx(t.data,!0),e.$set(e,"mosaics",[]),e.getAccountInfo())}))},parseTx:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.forEach((function(t){t.type===C["TransactionType"].TRANSFER&&(t.recipientAddress.plain()===e.g_rawAddress.plain()?t.mosaics.forEach((function(n){e.nglist.find((function(t){return t===n.id.toHex()}))||0===n.amount.compact()||(s&&(t.newB=!0),e.histories.receive_mosaics.push(t),e.init||(e.histories.receive_mosaics.unshift(t),e.soundPlay()))})):t.mosaics.forEach((function(n){e.nglist.find((function(t){return t===n.id.toHex()}))||0===n.amount.compact()||(s&&(t.newB=!0),e.histories.send_mosaics.push(t),e.init||(e.histories.send_mosaics.unshift(t),e.soundPlay()))})))}))},soundPlay:function(){this.recipientAudio.currentTime=0,this.recipientAudio.play(),this.snackbarMsg="transaction receiving",this.color="orange darken-2",this.snackbar=!0}}},I=B,L=Object(c["a"])(I,h,g,!1,null,null,null),G=L.exports;n["default"].use(m["a"]);var N=[{path:"/",name:"Home",component:G},{path:"/CreateMeta",name:"Meta",component:function(){return s.e("about").then(s.bind(null,"a300"))}}],D=new m["a"]({mode:"history",base:"",routes:N}),J=D;n["default"].config.productionTip=!1,new n["default"]({router:J,vuetify:v,render:function(t){return t(u)}}).$mount("#app")},6:function(t,e){},7:function(t,e){},8:function(t,e){},"85ec":function(t,e,s){},"8ef5":function(t,e,s){"use strict";s("917f")},9:function(t,e){},"917f":function(t,e,s){},"9d9c":function(t,e){t.exports={ng_mosaic_lists:["3A8416DB2D53B6C8","6BED913FA20223F8"]}},a8bc:function(t,e,s){}});
//# sourceMappingURL=index.3b97bdf4.js.map