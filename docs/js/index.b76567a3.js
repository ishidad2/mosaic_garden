(function(t){function e(e){for(var n,r,a=e[0],c=e[1],l=e[2],d=0,f=[];d<a.length;d++)r=a[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&f.push(i[r][0]),i[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(f.length)f.shift()();return o.push.apply(o,l||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],n=!0,a=1;a<s.length;a++){var c=s[a];0!==i[c]&&(n=!1)}n&&(o.splice(e--,1),t=r(r.s=s[0]))}return t}var n={},i={index:0},o=[];function r(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=n,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(s,n,function(e){return t[e]}.bind(null,n));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var u=c;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";s("85ec")},1:function(t,e){},10:function(t,e){},11:function(t,e){},12:function(t,e){},"14ff":function(t,e,s){"use strict";s("aabb")},2:function(t,e){},3:function(t,e){},"3e3a":function(t,e,s){t.exports=s.p+"media/ding.f29999de.ogg"},4:function(t,e){},5:function(t,e){},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-app",[s("v-app-bar",{staticClass:"white--text",attrs:{app:"",color:"#00000000"}},[s("h1",[t._v("Mosaic Garden")])]),s("v-main",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12",lg:"6",ms:"12"}},[s("v-card",{staticClass:"mb-3",attrs:{elevation:"2"}},[s("v-card-title",[t._v(" Garden Address ")]),s("v-card-text",[s("h3",[t._v(t._s(t.g_rawAddress.plain())),s("v-icon",{staticClass:"ml-3",on:{click:t.copy}},[t._v("mdi-content-copy")])],1)]),s("v-card-text",[t._v(" Please send your mosaic to the address above. (Except XYM)"),s("br"),t._v(" Money transfer from multisig addresses is not supported. Aggregate transactions are not supported. ")])],1)],1),s("v-col",{attrs:{cols:"12",lg:"6",ms:"12"}},[s("v-card",{staticClass:"mb-3",attrs:{elevation:"2"}},[s("v-card-title",[t._v(" User Address ")]),s("v-card-text",[s("v-row",[s("v-col",{attrs:{cols:"12",lg:"9",ms:"12"}},[s("v-text-field",{attrs:{disabled:"",label:"今後実装予定"},model:{value:t.rawAddress,callback:function(e){t.rawAddress=e},expression:"rawAddress"}})],1),s("v-col",[s("v-btn",{staticClass:"btn",attrs:{disabled:""}},[t._v("SSSへ署名を送る")])],1)],1)],1)],1)],1)],1),s("new-transaction",{ref:"tx",attrs:{histories:t.histories}}),s("list-view",{ref:"mosaic_list",attrs:{"p-items":t.mosaics}}),s("v-snackbar",{attrs:{absolute:"",bottom:"",color:t.color,outlined:""},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.snackbarMsg)+" ")])],1)],1)],1)],1)},o=[],r=s("1da1"),a=(s("96cf"),s("ac1f"),s("841c"),s("7db0"),s("d3b7"),s("5319"),s("159b"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-card",{staticClass:"mx-auto"},[s("v-list",{staticClass:"overflow-y-auto",attrs:{"max-height":"250",height:"250"}},[s("v-subheader",[t._v("Stock Mosaics")]),t._l(t.items,(function(e,n){return s("v-list-item",{key:n},[s("v-list-item-icon",[s("v-icon",[t._v("mdi-gift")])],1),s("v-list-item-content",[s("v-list-item-title",[t._v("Mosaic:"),s("span",{staticClass:"mosaic"},[t._v(t._s(e.mosaicInfo.id.toHex()))])]),s("v-list-item-subtitle",[t._v("amount:"+t._s(e.mosaic.amount.compact()))])],1)],1)}))],2)],1)],1)}),c=[],l={props:{pItems:{type:Array,defualt:function(){return[]}}},data:function(){return{items:this.pItems}},methods:{update:function(){this.items=this.pItems}}},u=l,d=(s("7148"),s("2877")),f=Object(d["a"])(u,a,c,!1,null,"0911f98a",null),p=f.exports,v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-card",{staticClass:"mx-auto",attrs:{color:"#FFFFFF90"}},[t.show?[s("v-progress-linear",{staticClass:"font-italic text--disabled",attrs:{color:"blue",height:"20","buffer-value":"0",stream:""}},[t._v(" Receiving ")])]:[s("v-progress-linear",{staticClass:"font-italic text--disabled",attrs:{color:"red",height:"20","buffer-value":"0",stream:""}},[t._v(" Not Receiving(please reload) ")])],s("v-row",{staticClass:"mb-2 pa-2"},[s("v-col",{attrs:{cols:"12",lg:"6"}},[s("v-card",[s("v-list",{staticClass:"overflow-y-auto",attrs:{"max-height":"250",height:"250"}},[s("v-subheader",[t._v("History of mosaic reception")]),t._l(t.recipt_items,(function(e,n){return s("v-list-item",{key:n},[s("v-list-item-icon",[e.newB&&0==n?[s("div",{staticClass:"box"},[s("v-icon",{attrs:{color:"orange darken-2"}},[t._v("mdi-new-box")])],1)]:[s("v-icon",[t._v("mdi-handshake-outline")])]],2),s("v-list-item",{attrs:{"two-line":""}},t._l(t.display(e),(function(e,n){return s("v-list-item-content",{key:n},[s("v-list-item-title",[t._v("Mosaic:"+t._s(e.name))]),s("v-list-item-subtitle",[t._v("Address:"+t._s(e.signerAddress))])],1)})),1)],1)}))],2)],1)],1),s("v-col",{attrs:{cols:"12",lg:"6"}},[s("v-card",{attrs:{tile:""}},[s("v-list",{staticClass:"overflow-y-auto",attrs:{"max-height":"250",height:"250"}},[s("v-subheader",[t._v("History of mosaic sending")]),t._l(t.send_items,(function(e,n){return s("v-list-item",{key:n},[s("v-list-item-icon",[e.newB&&0==n?[s("div",{staticClass:"box"},[s("v-icon",{attrs:{color:"orange darken-2"}},[t._v("mdi-new-box")])],1)]:[s("v-icon",[t._v("mdi-hand-coin")])]],2),t._l(t.display(e),(function(e,n){return s("v-list-item-content",{key:n},[s("v-list-item-title",[t._v("Mosaic:"+t._s(e.name))]),s("v-list-item-subtitle",[t._v("Address:"+t._s(e.recipientAddress))])],1)}))],2)}))],2)],1)],1)],1)],2)],1)},m=[],h={props:{histories:{type:Object,defualt:function(){}}},data:function(){return{recipt_items:this.histories.receive_mosaics,send_items:this.histories.send_mosaics,show:!1}},methods:{display:function(t){var e=[],s=t.signer.address.plain(),n=t.recipientAddress.plain();return t.mosaics.forEach((function(t){e.push({signerAddress:s,recipientAddress:n,name:t.id.toHex(),amount:t.amount.compact()})})),e}}},g=h,b=(s("14ff"),Object(d["a"])(g,v,m,!1,null,"75886690",null)),_=b.exports,y=s("83ff"),w=s("f32c"),x=s("883e"),A=s("9d9c"),k="https://dual-1.nodes-xym.work:3001",R={components:{ListView:p,NewTransaction:_},data:function(){return{mosaics:[],g_rawAddress:y["Address"].createFromRawAddress("NB3YJ6FZ7CRZLMILAW4S6Y3ONUP5TG5GZXGFWNA"),rawAddress:"",nglist:A["ng_mosaic_lists"],accountRepository:null,namespaceRepository:null,mosaicRepository:null,transactionRepository:null,snackbar:!1,multiLine:!0,listener:null,init:!0,histories:{receive_mosaics:[],send_mosaics:[]},color:"",snackbarMsg:"",recipientAudio:new Audio(s("3e3a"))}},created:function(){var t=this;this.$nextTick((function(){var e=new y["RepositoryFactoryHttp"](k);t.accountRepository=e.createAccountRepository(),t.transactionRepository=e.createTransactionRepository(),t.mosaicRepository=e.createMosaicRepository(),t.namespaceRepository=e.createNamespaceRepository(),t.getAccountInfo(),t.getTransfers(),t.openListener()}))},destroyed:function(){this.closeListenr()},methods:{getTransfers:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.transactionRepository.search({address:t.g_rawAddress,group:y["TransactionGroup"].Confirmed,pageSize:10,order:"asc"}).toPromise();case 2:s=e.sent,t.parseTx(s.data),t.init=!1;case 5:case"end":return e.stop()}}),e)})))()},getAccountInfo:function(){var t=this;this.accountRepository.getAccountInfo(this.g_rawAddress).pipe(w["a"]((function(t){return t.mosaics})),x["a"]((function(e){return!t.nglist.find((function(t){return t===e.id.toHex()}))}))).subscribe((function(e){if(0!==e.amount.compact()){var s=new y["MosaicId"](e.id.toHex());t.mosaicRepository.getMosaic(s).subscribe((function(s){return t.mosaics.unshift({mosaicInfo:s,mosaic:e})})),t.$refs.mosaic_list.update()}}))},openListener:function(){var t=this,e=k.replace("http","ws")+"/ws";this.listener=new y["Listener"](e,this.namespaceRepository,WebSocket),this.listener.open().then((function(){t.$refs.tx.show=!0,console.log("listener open"),t.listener.newBlock().subscribe((function(e){t.$refs.tx.show=!0,t.newBlock(e)}),(function(e){try{t.$refs.tx.show=!1}catch(s){console.log("listener error"),console.log(s)}}))})),this.listener.webSocket.onclose=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{console.log("listener onclose"),this.$refs.tx.show=!1}catch(e){}case 1:case"end":return t.stop()}}),t,this)})))},closeListenr:function(){this.listener.close(),this.listener=null;try{this.$refs.tx.show=!1}catch(t){}console.log("listener onclose")},copy:function(){var t=this;console.log("address copy"),navigator.clipboard.writeText(this.g_rawAddress.plain()).then((function(){console.log("copied!"),t.snackbarMsg="address copy",t.color="success",t.snackbar=!0})).catch((function(t){console.error(t)}))},newBlock:function(t){var e=this;this.transactionRepository.search({address:this.g_rawAddress,height:t.height,group:y["TransactionGroup"].Confirmed}).subscribe((function(t){t.data.length>0&&(e.parseTx(t.data,!0),e.$set(e,"mosaics",[]),e.getAccountInfo())}))},parseTx:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.forEach((function(t){t.type===y["TransactionType"].TRANSFER&&(t.recipientAddress.plain()===e.g_rawAddress.plain()?t.mosaics.forEach((function(n){e.nglist.find((function(t){return t===n.id.toHex()}))||0===n.amount.compact()||(s&&(t.newB=!0),e.histories.receive_mosaics.unshift(t),e.init||e.soundPlay("recipient"))})):t.mosaics.forEach((function(n){e.nglist.find((function(t){return t===n.id.toHex()}))||0===n.amount.compact()||(s&&(t.newB=!0),e.histories.send_mosaics.unshift(t),e.init||e.soundPlay())})))}))},soundPlay:function(t){this.recipientAudio.currentTime=0,this.recipientAudio.play(),this.snackbarMsg="transaction receiving",this.color="orange darken-2",this.snackbar=!0}}},C=R,M=(s("034f"),Object(d["a"])(C,i,o,!1,null,null,null)),T=M.exports,O=s("ce5b"),j=s.n(O);s("bf40"),s("5363");n["default"].use(j.a);var S={},P=new j.a(S);n["default"].config.productionTip=!1;new n["default"]({vuetify:P,render:function(t){return t(T)}}).$mount("#app")},6:function(t,e){},6413:function(t,e,s){},7:function(t,e){},7148:function(t,e,s){"use strict";s("6413")},8:function(t,e){},"85ec":function(t,e,s){},9:function(t,e){},"9d9c":function(t,e){t.exports={ng_mosaic_lists:["3A8416DB2D53B6C8"]}},aabb:function(t,e,s){}});
//# sourceMappingURL=index.b76567a3.js.map